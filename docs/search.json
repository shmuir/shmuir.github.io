[
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "Projects & Blog",
    "section": "",
    "text": "The Thomas Fire in Santa Barbara County 2017-2018\n\n\n\nGIS\n\n\nMEDS\n\n\nPython\n\n\n\nThis was an assignment for EDS220: Working with Environmental Datasets for the Masters of Environmental Data Science program at UCSB\n\n\n\nSam Muir\n\n\nDec 5, 2023\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIdentifying power outages in Houston, TX from February 2021 storms\n\n\n\nGIS\n\n\nMEDS\n\n\nR\n\n\n\nThis was an assignment for EDS223: Geospatial Analysis for the Masters of Environmental Data Science program at UCSB\n\n\n\nSam Muir\n\n\nNov 26, 2023\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nApple bloom dates in the Mid-Atlantic region in a changing climate\n\n\n\nAgriculture\n\n\nClimate\n\n\nR\n\n\n\nI spent the summer of 2021 as an NSF REU student at Penn State University researching climate and apple bloom changes with Dr. Rich…\n\n\n\nSam Muir\n\n\nNov 13, 2023\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPhytophthora presence in Southern Maryland coastal soils\n\n\n\nPlants\n\n\nEcology\n\n\nCoastal\n\n\n\nThis was my directed research project as an undergraduate student at St. Mary’s College of Maryland in Dr. Lorena Torres-Martinez’s lab.\n\n\n\nSam Muir\n\n\nNov 10, 2023\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html",
    "href": "projects/2023-11-26-houston-power-outage/index.html",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "",
    "text": "In February 2021, the state of Texas suffered a major energy crisis as a result of three severe winter storms and left many people without power. Historically, power outages may disproportionately affect marginalized groups and lower-income areas can be of lower priority in recovery. For more background: engineering and political perspectives.\nIn this post, I am interested in estimating the number of homes in Houston that lost power as a result of the first two storm and investigating if there is a correlation between loss of power and socioeconomic status."
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html#night-lights",
    "href": "projects/2023-11-26-houston-power-outage/index.html#night-lights",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "Night Lights",
    "text": "Night Lights\nSince these night light files are quite large, I am using stars::read_stars() to work with the raster data. Here I have two tiles for 2021-02-07 and two tiles for 2021-02-16.\n\n\nCode\n# read in night light files using read_stars()\nfeb7_1 &lt;- read_stars(\"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.tif\")\nfeb7_2 &lt;- read_stars(\"data/VNP46A1/VNP46A1.A2021038.h08v06.001.2021039064329.tif\")\nfeb16_1 &lt;- read_stars(\"data/VNP46A1/VNP46A1.A2021047.h08v05.001.2021048091106.tif\")\nfeb16_2 &lt;- read_stars(\"data/VNP46A1/VNP46A1.A2021047.h08v06.001.2021048091105.tif\")\n\n\nThe tile pairs now need to be combined to create a full image of out area of interest.\n\n\nCode\n# combine both feb. 7th\nfeb7 &lt;- st_mosaic(feb7_1, feb7_2)\n\n# combine both feb. 16th\nfeb16 &lt;- st_mosaic(feb16_1, feb16_2)\n\n\nNow that we have the full area we can begin finding the difference light intensity.\nTo find if there is a different in the night lights from before and after the storm, I found the different between the light intensity, assuming that any location that experienced a drop of more than 200 nW cm-2sr-1 experienced a power outage.\n\n\nCode\n# finding the difference in night lights\nnight_diff &lt;- (feb7 - feb16)\n#plot(night_diff, main = \"Difference in night light\")\n\n# create a mask, sectioning in to 200 to infinity; the rest become NA\nnight_mask &lt;- cut(night_diff, c(200, Inf), labels = \"outage\")\n\n# the night mask should have one level \"outage\" and NA for the rest; check using:\n# unique(night_mask$VNP46A1.A2021038.h08v05.001.2021039064328.tif)\n\n# vectorizing night_mask using st_as_sf\nnight_mask_vec &lt;- st_as_sf(night_mask) %&gt;%\n  st_make_valid() # fix invalid geometries\n\n# checking that it is now sf data.frame\n# class(night_mask_vec)\n\n\nIn this project I am wanting to specifically look at Houston, and right now, the map covers more area than just Houston. To focus in on Houston, I first need to define the coordinates of the city boundary and then turn them into a polygon and simple features collection.\n\n\nCode\n# creating Houston border with the given coordinates using st_polygon()\nhouston_border &lt;- st_polygon(list(rbind(c(-96.5,29), c(-96.5,30.5), c(-94.5, 30.5), c(-94.5,29), c(-96.5,29)))) # rbind combines objects\n\n# convert to sfc and define crs\nhouston_border_sf &lt;- st_sfc(houston_border, crs = 'EPSG:4326')\n\n\nNow that the boarder is defined, I can use it to crop the blackout mask. Additionally, I need to make sure that both of the objects have the same coordinate reference system (CRS), and in this case, I want to use EPSG:3083 (NAD83 / Texas Centric Albers Equal Area).\n\n\nCode\n# crop using the Houston border\nhouston_mask &lt;- night_mask_vec[houston_border_sf, ,] # subset using the border object\n\n# reproject cropped object to new crs\noutage_mask &lt;- st_transform(houston_mask, crs = 'EPSG:3083')\n#plot(outage_mask)"
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html#highways",
    "href": "projects/2023-11-26-houston-power-outage/index.html#highways",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "Highways",
    "text": "Highways\nHighways often make up a large portion of observable night light and this is not something I want to capture. So, using the roads data, I will exclude areas with roads, as well as include a 200m buffer around the roads.\nThis data includes more than just highways, so it is important to select just the highways (motorways).\n\n\nCode\n## highway data ##\n# define sql query\nquery_highways &lt;- \"SELECT * FROM gis_osm_roads_free_1 WHERE fclass='motorway'\"\n\n# load highway data using the query and reproject to EPSG:3083\nhighways &lt;- st_read(\"data/gis_osm_roads_free_1.gpkg\", query = query_highways) %&gt;%\n  st_transform(highways, crs = 'EPSG:3083')\n\n# highway buffer setting distance to 200m\nhighway_buffer &lt;- st_buffer(x = highways, dist = 200) %&gt;%\n  st_union() # dissolve undissolved buffers\n\n\nUsing the newly prepared highway data, I can now exclude areas within 200m of a highway.\n\n\nCode\n# combine the geometries and exclude those within 200m of a highway\nmask_houston_highway &lt;- st_difference(outage_mask, highway_buffer)\n\n## check that areas have been excluded ##\n# nrow(mask_houston_highway) &gt; nrow(outage_mask) # output should be FALSE \n# plot(mask_houston_highway) # check out what it looks like\n\n\nThere were 7247 areas that experienced blackouts that are further than 200m from a highway."
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html#homes",
    "href": "projects/2023-11-26-houston-power-outage/index.html#homes",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "Homes",
    "text": "Homes\nNow that we have accounted for the highways it’s time to find the number of homes that experienced a blackout. Similarly to the road data, the data set that contains information on homes also contains other building types, so it’s important to select only residential buildings (and to make sure the CRS is EPSG:3083!).\n\n\nCode\n## houses data ##\n# define sql query\nquery_houses &lt;- \"SELECT * FROM gis_osm_buildings_a_free_1 WHERE (type IS NULL AND name IS NULL) OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')\"\n\n# read in the houses data using query\nhouses &lt;- st_read(\"data/gis_osm_buildings_a_free_1.gpkg\", query = query_houses)\n\n# transform crs\nhouses &lt;- st_transform(houses, crs = 'EPSG:3083')\n#plot(houses['type'])\n\n# filter houses data using the blackout mask\noutage_houses &lt;- houses[mask_houston_highway, drop = FALSE]\n\n# check and see that filtered data has fewer houses than the original\n# nrow(houses) &gt; nrow(outage_houses)\n\n\nThere were 157411 homes in Houston affected by the power outage."
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html#median-income",
    "href": "projects/2023-11-26-houston-power-outage/index.html#median-income",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "Median Income",
    "text": "Median Income\nThe last data that needs to be prepared is the income data. From the geodatabase, we want the census tract geometries and the median income.\n\n\nCode\n# Texas geometries data and transform crs\ncensus_geom &lt;- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\", layer = \"ACS_2019_5YR_TRACT_48_TEXAS\") %&gt;%\n  st_transform(census_geom, crs = 'EPSG:3083')\n#st_crs(census_geom) # check the crs is correct\n\n# income data\nincome &lt;- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\", layer = \"X19_INCOME\")\n\n# select variables; rename median income and GEOID to match census_geom\nincome_median &lt;- income %&gt;% \n  select(GEOID, B19013e1) %&gt;% \n  rename(median_income = B19013e1, GEOID_Data = GEOID)"
  },
  {
    "objectID": "projects/2023-11-26-houston-power-outage/index.html#analyzing-backouts-by-census-tract-and-their-median-income",
    "href": "projects/2023-11-26-houston-power-outage/index.html#analyzing-backouts-by-census-tract-and-their-median-income",
    "title": "Identifying power outages in Houston, TX from February 2021 storms",
    "section": "Analyzing backouts by census tract and their median income",
    "text": "Analyzing backouts by census tract and their median income\nWith all of this data, I can now determine which census tracts experiences power outages and look at them in relation to median income for the census tract.\n\n\nCode\n# joining census geometries and median income data\ncensus_data &lt;- left_join(census_geom, \n                         income_median, by = \"GEOID_Data\")\n\n# filtering the census data based on buildings to add a column indicating that these census tracts were part of a blackout\ncensus_outage &lt;- st_filter(census_data, outage_houses) %&gt;%\n mutate(blackout = 'had a blackout')\n#head(census_outage)\n\n## preparing data for mapping ## \nhouston_border_sf &lt;- st_transform(houston_border_sf, crs = \"EPSG:3083\")\n\n#creating a full df of Houston geometries\ncensus_houston &lt;- census_data[houston_border_sf, ,] \ncensus_houston2 &lt;- st_transform(census_houston, \"+init=epsg:4326\")\n\n# making centroids to indicate which tracts had a blackout\ncensus_outage_map &lt;- census_outage %&gt;%\n  st_centroid() %&gt;%\n  st_transform(\"+init=epsg:4326\")\n\n# color paletted\npal &lt;- colorBin(\"viridis\", domain = census_houston2$median_income, reverse = TRUE) # define color palette\npal2 &lt;- colorFactor(\"black\", domain = census_outage_map$blackout, reverse = TRUE) # define color palette\n# map labels\nlabels &lt;- sprintf(\"$%g\",\n  round(census_houston2$median_income, 2)) %&gt;% \n  lapply(htmltools::HTML)\n\n# mapping\nleaflet() %&gt;%\n  addPolygons(data = census_houston2,\n    fillColor = ~pal(census_houston2$median_income), # color region by median income\n    weight = 1,\n    opacity = 1,\n    color = \"black\",\n    dashArray = \"3\",\n    fillOpacity = 1,\n   # popup = p_popup,\n    highlightOptions = highlightOptions( # when you hover over there will be pop up text\n    weight = 5,\n    color = \"#666\",\n    dashArray = \"\",\n    fillOpacity = 1,\n    bringToFront = TRUE),\n  label = labels, # label by previously defined\n  labelOptions = labelOptions(\n    style = list(\"font-weight\" = \"normal\", padding = \"3px 8px\"),\n    textsize = \"15px\",\n    direction = \"auto\")) %&gt;%\n  addLegend(pal = pal, # legend based on color palette\n            values = census_houston2$median_income,\n            opacity = 0.7,\n            labFormat = labelFormat(prefix = \"$\"), # add units\n            title = paste(\"Median Income ($)\"), # updates with species input\n            position = \"bottomright\") %&gt;%\n  addCircleMarkers(data = census_outage_map, # add centroids to map\n             color = \"black\",\n             radius = 0.25,\n             opacity = 1) %&gt;%\n  addLegend(pal = pal2, # legend for centroids\n            values = census_outage_map$blackout,\n            opacity = 1,\n            position = \"bottomright\") %&gt;%\n  addScaleBar() %&gt;%\n  addTiles() # basemap\n\n\n\n\n\n\n\n\nCode\n# convert census_outage to df to be able to join\ncensus_outage_df &lt;- as.data.frame(census_outage)\n\n# joining census outage data and census data for all of Houston\ncensus_map_data &lt;- left_join(census_houston, \n                             census_outage_df) %&gt;% \n  mutate(blackout = replace(blackout, is.na(blackout), \"did not have a blackout\")) # indicating which homes did not have a blackout based on the values being NA\n\n# census tracts that did and did not experience a blackout\nggplot(census_map_data, aes(x = median_income)) +\n  geom_histogram(fill = \"#3d5c50\", color = \"white\") +\n  facet_wrap(~ blackout) + # facet to have separate plots for blackout and no blackout\n  labs(title = \"Median income for homes in Houston, TX\",\n       x = \"Median Income (USD)\",\n       y = \"Count\") +\n  theme_linedraw()\n\n\n\n\n\nCode\nsummary(census_map_data$median_income)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n  13886   43482   59330   70023   86683  250001      10"
  }
]